import{_ as h,c as i,a as s,f as c,w as f,g as d,t,F as m,r as u,b as P,e as a,o as n}from"./index-DIYoO28f.js";const g={name:"RolesView",data(){return{role:null,permisos:[],rolePermisoAdd:null}},mounted(){this.fetchRoleData(),this.fetchRolePermisos(),this.fetchPermisos()},methods:{addPermisoToRole(){if(!this.rolePermisoAdd){alert("Seleccione un permiso para añadir.");return}a.post(`http://localhost:8000/api/roles/${this.$route.params.id}/permisos`,{permiso_id:this.rolePermisoAdd}).then(o=>{alert("Permiso añadido al rol exitosamente."),this.fetchRolePermisos()}).catch(o=>{console.error("Error adding permiso to role:",o),alert("Error al añadir el permiso al rol.")})},async fetchPermisos(){a.get("http://localhost:8000/api/permisos").then(o=>{this.permisos=o.data}).catch(o=>{console.error("Error fetching permisos:",o)})},async fetchRolePermisos(){a.get(`http://localhost:8000/api/roles/${this.$route.params.id}/permisos`).then(o=>{this.role.permisos=o.data}).catch(o=>{console.error("Error fetching role permisos:",o)})},async fetchRoleData(){a.get(`http://localhost:8000/api/roles/${this.$route.params.id}`).then(o=>{this.role=o.data}).catch(o=>{console.error("Error fetching role data:",o)})}}},R={key:0},y=["value"];function D(o,e,k,x,l,p){return n(),i(m,null,[e[5]||(e[5]=s("h2",null,"Detalle del Rol",-1)),l.role?(n(),i("div",R,[s("p",null,[e[2]||(e[2]=s("strong",null,"ID:",-1)),d(" "+t(l.role.id),1)]),s("p",null,[e[3]||(e[3]=s("strong",null,"Nombre:",-1)),d(" "+t(l.role.nombre),1)]),s("p",null,[e[4]||(e[4]=s("strong",null,"Descripción:",-1)),d(" "+t(l.role.descripcion),1)])])):c("",!0),s("ul",null,[(n(!0),i(m,null,u(l.role?.permisos,r=>(n(),i("li",{key:r.id},t(r.name)+" - "+t(r.detail),1))),128))]),e[6]||(e[6]=s("hr",null,null,-1)),e[7]||(e[7]=s("h3",null,"Todos los Permisos",-1)),f(s("select",{"onUpdate:modelValue":e[0]||(e[0]=r=>l.rolePermisoAdd=r)},[(n(!0),i(m,null,u(l.permisos,r=>(n(),i("option",{key:r.id,value:r.id},t(r.name)+" - "+t(r.detail),9,y))),128))],512),[[P,l.rolePermisoAdd]]),s("button",{onClick:e[1]||(e[1]=(...r)=>p.addPermisoToRole&&p.addPermisoToRole(...r))},"Añadir Permiso al Rol")],64)}const E=h(g,[["render",D]]);export{E as default};
