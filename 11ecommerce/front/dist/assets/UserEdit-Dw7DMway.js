import{_ as g,c as l,a as r,f as h,t as d,d as U,w as i,v as p,F as m,r as f,b,e as n,o as a}from"./index-BI2CHZ53.js";const v={name:"UserEdit",data(){return{user:null,roles:[],role:null}},mounted(){this.fetchUserData(),this.fetchRoles(),this.fetchRolesUser()},methods:{agregarRol(){this.role?n.post(`http://143.198.70.37:8000/api/users/${this.$route.params.id}/roles`,{role_id:this.role}).then(s=>{alert("Rol asignado con éxito"),this.fetchRolesUser()}).catch(s=>{console.error("Error assigning role:",s)}):alert("Por favor, selecciona un rol.")},fetchRolesUser(){n.get(`http://143.198.70.37:8000/api/users/${this.$route.params.id}/roles`).then(s=>{this.user.roles=s.data}).catch(s=>{console.error("Error fetching user roles:",s)})},fetchRoles(){n.get("http://143.198.70.37:8000/api/roles").then(s=>{this.roles=s.data}).catch(s=>{console.error("Error fetching roles:",s)})},async fetchUserData(){n.get(`http://143.198.70.37:8000/api/users/${this.$route.params.id}`).then(s=>{this.user=s.data}).catch(s=>{console.error("Error fetching user data:",s)})},actualizarUsuario(){n.put(`http://143.198.70.37:8000/api/users/${this.$route.params.id}`,this.user).then(s=>{alert("Usuario actualizado con éxito"),this.$router.push("/usuarios")}).catch(s=>{console.error("Error updating user data:",s)})}}},R=["value"];function y(s,e,E,w,t,u){return a(),l(m,null,[e[12]||(e[12]=r("h1",null,"Datos del Usuario",-1)),r("p",null," Aquí se mostrarán los detalles del usuario seleccionado. "+d(s.$route.params.id),1),t.user?(a(),l("form",{key:0,onSubmit:e[5]||(e[5]=U((...o)=>u.actualizarUsuario&&u.actualizarUsuario(...o),["prevent"]))},[r("div",null,[e[6]||(e[6]=r("label",{for:"name"},[r("strong",null,"Nombre:")],-1)),i(r("input",{type:"text",id:"name","onUpdate:modelValue":e[0]||(e[0]=o=>t.user.name=o)},null,512),[[p,t.user.name]])]),r("div",null,[e[7]||(e[7]=r("label",{for:"email"},[r("strong",null,"Email:")],-1)),i(r("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=o=>t.user.email=o)},null,512),[[p,t.user.email]])]),r("div",null,[e[8]||(e[8]=r("label",{for:"password"},[r("strong",null,"Contraseña:")],-1)),i(r("input",{type:"password",id:"password","onUpdate:modelValue":e[2]||(e[2]=o=>t.user.password=o),placeholder:"Dejar en blanco para no cambiar"},null,512),[[p,t.user.password]])]),r("ul",null,[(a(!0),l(m,null,f(t.user.roles,o=>(a(),l("li",{key:o.id},d(o.nombre),1))),128))]),e[9]||(e[9]=r("button",{type:"submit"},"Guardar Cambios",-1)),e[10]||(e[10]=r("hr",null,null,-1)),e[11]||(e[11]=r("h2",null,"Asignar Roles",-1)),i(r("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.role=o)},[(a(!0),l(m,null,f(t.roles,o=>(a(),l("option",{key:o.id,value:o.id},d(o.nombre),9,R))),128))],512),[[b,t.role]]),r("button",{type:"button",onClick:e[4]||(e[4]=(...o)=>u.agregarRol&&u.agregarRol(...o))},"Agregar Rol")],32)):h("",!0)],64)}const c=g(v,[["render",y]]);export{c as default};
