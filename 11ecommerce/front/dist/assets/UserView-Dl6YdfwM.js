import{_ as m,c as n,a as e,F as u,r as d,e as c,o as i,t as a}from"./index-DIYoO28f.js";const p={name:"UserView",data(){return{users:[],permisos:[]}},mounted(){this.permisos=JSON.parse(localStorage.getItem("permisos"))||[],console.log("Permisos cargados desde localStorage:",this.permisos),this.fetchUsers()},methods:{deleteUser(s){confirm("¿Estás seguro de que deseas eliminar este usuario?")&&c.delete(`http://localhost:8000/api/users/${s}`).then(r=>{alert("Usuario eliminado con éxito"),this.fetchUsers()}).catch(r=>{console.error("Error deleting user:",r)})},editUser(s){this.$router.push("/usuarios/editar/"+s)},async fetchUsers(){if(!this.permisos.includes("view_user")){alert("No tienes permiso para ver los usuarios.");return}const s=localStorage.getItem("token");c.get("http://localhost:8000/api/users",{headers:{Authorization:`Bearer ${s}`}}).then(r=>{this.users=r.data}).catch(r=>{console.error("There was an error fetching the users!",r)})},viewUser(s){this.$router.push("/usuarios/"+s)},createUser(){this.$router.push("/usuarios/crear")}}},U=["onClick"],g=["onClick"],k=["onClick"];function f(s,r,b,_,h,o){return i(),n(u,null,[r[2]||(r[2]=e("h1",null,"Usuarios",-1)),e("button",{onClick:r[0]||(r[0]=(...t)=>o.createUser&&o.createUser(...t)),style:{padding:"10px","background-color":"#4CAF50",color:"white",border:"none","border-radius":"5px",cursor:"pointer"}}," Crear Usuario "),e("table",null,[r[1]||(r[1]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Nombre"),e("th",null,"Email"),e("th",null,"Roles"),e("th",null,"Opciones")])],-1)),e("tbody",null,[(i(!0),n(u,null,d(h.users,t=>(i(),n("tr",{key:t.id},[e("td",null,a(t.id),1),e("td",null,a(t.name),1),e("td",null,a(t.email),1),e("td",null,[e("ul",null,[(i(!0),n(u,null,d(t.roles,l=>(i(),n("li",{key:l.id},a(l.nombre),1))),128))])]),e("td",null,[e("button",{onClick:l=>o.editUser(t.id)},"Editar",8,U),e("button",{onClick:l=>o.deleteUser(t.id)},"Eliminar",8,g),e("button",{onClick:l=>o.viewUser(t.id)},"Ver",8,k)])]))),128))])])],64)}const v=m(p,[["render",f]]);export{v as default};
